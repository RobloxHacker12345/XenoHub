local Players = game:GetService("Players")
local player = Players.LocalPlayer
local mouse = player:GetMouse()


local ball = workspace:WaitForChild("Ball")


local function passBallToTeammate(teammatePosition)
    local ballPosition = ball.Position
    local direction = (teammatePosition - ballPosition).unit
    local distance = (teammatePosition - ballPosition).magnitude

    -- Adjust the force based on the distance
    local force = direction * (distance * 5) 

    ball:ApplyImpulse(force)
end

-- Event handler for mouse click to pass the ball
mouse.Button1Down:Connect(function()
    local targetPlayer = nil
    local closestDistance = math.huge

    for _, teammate in pairs(Players:GetPlayers()) do
        if teammate ~= player and teammate.Team == player.Team then
            if teammate.Character then
                local distance = (teammate.Character.HumanoidRootPart.Position - mouse.Hit.p).magnitude
                if distance < closestDistance then
                    closestDistance = distance
                    targetPlayer = teammate
                end
            end
        end
    end

    if targetPlayer then
        passBallToTeammate(targetPlayer.Character.HumanoidRootPart.Position)
    end
end)
